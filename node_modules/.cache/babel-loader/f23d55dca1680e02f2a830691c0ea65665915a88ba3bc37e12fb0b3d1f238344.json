{"ast":null,"code":"import NavBar from'../NavBar/NavBar';import signDataLogo from'../../images/header__logo.svg';import{Link}from\"react-router-dom\";import useForm from\"../../hooks/useForm\";import{useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Register(_ref){let{onRegister}=_ref;const{values,setValues}=useForm({});const[formValid,setFormValid]=useState(false);const[emailError,setEmailError]=useState('');const emailRegex=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$/;function isEmailValid(email){const isValid=emailRegex.test(email);if(!isValid){setEmailError('Некорректный email');}else{setEmailError('');}return isValid;}function isPasswordValid(password){return typeof password==='string'&&password.length>=2;}function isNameValid(name){return typeof name==='string'&&name.length>=2;}function validateForm(email,password,name){const isEmail=isEmailValid(email);const isPassword=isPasswordValid(password);const isName=isNameValid(name);return isEmail&&isPassword&&isName;}useEffect(()=>{const isFormValid=validateForm(values.email,values.password,values.name);setFormValid(isFormValid);},[values.email,values.password,values.name]);function handleChange(e){const{name,value}=e.target;setValues({...values,[name]:value});if(name==='email'){isEmailValid(value);}console.log(emailError);}function handleSubmit(evt){evt.preventDefault();isEmailValid(values.email);onRegister(values,setValues);}return/*#__PURE__*/_jsxs(\"main\",{className:\"sign-data\",children:[/*#__PURE__*/_jsx(Link,{className:\"sign-data__logo-link\",to:'/',children:/*#__PURE__*/_jsx(\"img\",{src:signDataLogo,className:\"sign-data__logo\",alt:\"\\u041B\\u043E\\u0433\\u043E\\u0442\\u0438\\u043F\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"sign-data__title\",children:\"\\u0414\\u043E\\u0431\\u0440\\u043E \\u043F\\u043E\\u0436\\u0430\\u043B\\u043E\\u0432\\u0430\\u0442\\u044C!\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"sign-data__form\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"sign-data__label\",children:\"\\u0418\\u043C\\u044F\"}),/*#__PURE__*/_jsx(\"input\",{onChange:handleChange,name:\"name\",placeholder:\"\\u0418\\u043C\\u044F\",minLength:2,maxLength:30,required:true,className:\"sign-data__input\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sign-data__input-error\",children:document.querySelector('input[name=\"name\"]')&&document.querySelector('input[name=\"name\"]').validationMessage}),/*#__PURE__*/_jsx(\"label\",{className:\"sign-data__label\",children:\"E-mail\"}),/*#__PURE__*/_jsx(\"input\",{onChange:handleChange,name:\"email\",placeholder:\"E-mail\",minLength:2,maxLength:30,required:true,className:\"sign-data__input\",type:\"email\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sign-data__input-error\",children:emailError||document.querySelector('input[name=\"email\"]')&&document.querySelector('input[name=\"email\"]').validationMessage}),/*#__PURE__*/_jsx(\"label\",{className:\"sign-data__label\",children:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"input\",{onChange:handleChange,name:\"password\",placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",minLength:2,maxLength:30,required:true,className:\"sign-data__input\",type:\"password\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sign-data__input-error\",children:document.querySelector('input[name=\"password\"]')&&document.querySelector('input[name=\"password\"]').validationMessage}),/*#__PURE__*/_jsx(\"button\",{className:\"sign-data__submit\",type:\"submit\",disabled:!formValid,children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"sign-data__text-under-submit\",children:[\"\\u0423\\u0436\\u0435 \\u0437\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u044B? \",/*#__PURE__*/_jsx(NavBar,{name:\"Войти\",path:\"sign-in\",className:\"sign-data__link-under-submit\"})]})]});}export default Register;","map":{"version":3,"names":["NavBar","signDataLogo","Link","useForm","useEffect","useState","jsx","_jsx","jsxs","_jsxs","Register","_ref","onRegister","values","setValues","formValid","setFormValid","emailError","setEmailError","emailRegex","isEmailValid","email","isValid","test","isPasswordValid","password","length","isNameValid","name","validateForm","isEmail","isPassword","isName","isFormValid","handleChange","e","value","target","console","log","handleSubmit","evt","preventDefault","className","children","to","src","alt","onSubmit","onChange","placeholder","minLength","maxLength","required","document","querySelector","validationMessage","type","disabled","path"],"sources":["C:/Users/79267/desktop/praktikum/dev/movies-explorer-frontend-no-api/src/components/sign-data/Register.js"],"sourcesContent":["import NavBar from '../NavBar/NavBar';\r\nimport signDataLogo from '../../images/header__logo.svg';\r\nimport { Link } from \"react-router-dom\";\r\nimport useForm from \"../../hooks/useForm\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nfunction Register({ onRegister }) {\r\n\r\n    const { values, setValues } = useForm({});\r\n    const [formValid, setFormValid] = useState(false);\r\n    const [emailError, setEmailError] = useState('');\r\n    const emailRegex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$/;\r\n\r\n\r\n    function isEmailValid(email) {\r\n        const isValid = emailRegex.test(email);\r\n        if (!isValid) {\r\n            setEmailError('Некорректный email');\r\n        } else {\r\n            setEmailError('');\r\n        }\r\n        return isValid;\r\n    }\r\n\r\n    function isPasswordValid(password) {\r\n        return typeof password === 'string' && password.length >= 2;\r\n    }\r\n\r\n    function isNameValid(name) {\r\n        return typeof name === 'string' && name.length >= 2;\r\n    }\r\n\r\n    function validateForm(email, password, name) {\r\n        const isEmail = isEmailValid(email);\r\n        const isPassword = isPasswordValid(password);\r\n        const isName = isNameValid(name)\r\n        return isEmail && isPassword && isName;\r\n    }\r\n\r\n    useEffect(() => {\r\n        const isFormValid = validateForm(values.email, values.password, values.name);\r\n        setFormValid(isFormValid);\r\n    }, [values.email, values.password, values.name]);\r\n\r\n    function handleChange(e) {\r\n        const { name, value } = e.target;\r\n        setValues({ ...values, [name]: value });\r\n        if (name === 'email') {\r\n            isEmailValid(value);\r\n        }\r\n        console.log(emailError)\r\n    }\r\n\r\n    function handleSubmit(evt) {\r\n        evt.preventDefault();\r\n        isEmailValid(values.email);\r\n        onRegister(values, setValues);\r\n    }\r\n\r\n    return (\r\n        <main className=\"sign-data\">\r\n            <Link className=\"sign-data__logo-link\" to={'/'}><img src={signDataLogo} className=\"sign-data__logo\" alt=\"Логотип\"></img></Link>\r\n            <h1 className=\"sign-data__title\">Добро пожаловать!</h1>\r\n            <form onSubmit={handleSubmit} className=\"sign-data__form\">\r\n\r\n                <label className=\"sign-data__label\">Имя</label>\r\n                <input\r\n                    onChange={handleChange} name=\"name\" placeholder=\"Имя\" minLength={2}\r\n                    maxLength={30} required className=\"sign-data__input\"\r\n                ></input>\r\n                <span className=\"sign-data__input-error\">{document.querySelector('input[name=\"name\"]') &&\r\n                    document.querySelector('input[name=\"name\"]').validationMessage}</span>\r\n\r\n                <label className=\"sign-data__label\">E-mail</label>\r\n                <input onChange={handleChange} name=\"email\" placeholder=\"E-mail\" minLength={2} maxLength={30} required\r\n                    className=\"sign-data__input\" type=\"email\"\r\n                ></input>\r\n                <span className=\"sign-data__input-error\">\r\n                    {emailError || (document.querySelector('input[name=\"email\"]') &&\r\n                        document.querySelector('input[name=\"email\"]').validationMessage)}\r\n                </span>\r\n\r\n                <label className=\"sign-data__label\">Пароль</label>\r\n                <input onChange={handleChange} name=\"password\" placeholder=\"Пароль\" minLength={2} maxLength={30} required\r\n                    className=\"sign-data__input\" type=\"password\"\r\n                ></input>\r\n                <span className=\"sign-data__input-error\">{document.querySelector('input[name=\"password\"]') &&\r\n                    document.querySelector('input[name=\"password\"]').validationMessage}</span>\r\n\r\n                <button className=\"sign-data__submit\" type=\"submit\" disabled={!formValid}>Зарегистрироваться</button>\r\n            </form>\r\n            <p className=\"sign-data__text-under-submit\">Уже зарегистрированы? <NavBar\r\n                name={\"Войти\"} path={\"sign-in\"} className={\"sign-data__link-under-submit\"} />\r\n            </p>\r\n        </main>\r\n    );\r\n}\r\n\r\nexport default Register;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}