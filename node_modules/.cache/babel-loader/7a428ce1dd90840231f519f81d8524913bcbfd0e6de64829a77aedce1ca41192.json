{"ast":null,"code":"import React,{useState,useEffect}from'react';import{mainApi}from\"../../utils/MainApi\";import SearchForm from\"../SearchForm/SearchForm\";import MoviesCardList from\"../MoviesCardList/MoviesCardList\";import{UsersMovies}from\"../../contexts/UsersMovies\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Movies(_ref){let{openPopupError,handleUpdateUsersMovies}=_ref;const[movies,setMovies]=useState([]);const[isShortMovies,setIsShortMovies]=useState(false);const[allMovies,setAllMovies]=useState([]);const addedMovies=React.useContext(UsersMovies);useEffect(()=>{// mainApi.getMovies()\n//     .then((data) => {\n//         setMovies(data);\n//         setAllMovies(data);\n//     })\n//     .catch((error) => {\n//         console.log(`${error}`);\n//         openPopupError(true);\n//     });\n// setMovies(addedMovies)\n// setAllMovies(addedMovies)\nsetMovies(addedMovies);setAllMovies(addedMovies);console.log(addedMovies);},[addedMovies]);function findMovie(filter){let filteredMovies=allMovies.filter(_ref2=>{let{nameRU}=_ref2;return nameRU.toLowerCase().includes(filter.toLowerCase());});if(isShortMovies){filteredMovies=filteredMovies.filter(_ref3=>{let{duration}=_ref3;return duration<=40;});}setMovies(filteredMovies);}function updateMoviesList(movieCard){setMovies(prevMovies=>prevMovies.filter(movie=>movie._id!==movieCard._id));}function handleCheckboxChange(){setIsShortMovies(!isShortMovies);if(isShortMovies){setMovies(allMovies);}else{const filteredMovies=allMovies.filter(_ref4=>{let{duration}=_ref4;return duration<=40;});setMovies(filteredMovies);}}return/*#__PURE__*/_jsxs(\"main\",{className:\"movies\",children:[/*#__PURE__*/_jsx(SearchForm,{findMovie:findMovie,handleCheckboxChange:handleCheckboxChange,isShortMovies:isShortMovies}),/*#__PURE__*/_jsx(MoviesCardList,{movies:movies,updateMoviesList:updateMoviesList,handleUpdateUsersMovies:handleUpdateUsersMovies})]});}export default Movies;","map":{"version":3,"names":["React","useState","useEffect","mainApi","SearchForm","MoviesCardList","UsersMovies","jsx","_jsx","jsxs","_jsxs","Movies","_ref","openPopupError","handleUpdateUsersMovies","movies","setMovies","isShortMovies","setIsShortMovies","allMovies","setAllMovies","addedMovies","useContext","console","log","findMovie","filter","filteredMovies","_ref2","nameRU","toLowerCase","includes","_ref3","duration","updateMoviesList","movieCard","prevMovies","movie","_id","handleCheckboxChange","_ref4","className","children"],"sources":["C:/Users/79267/desktop/praktikum/dev/movies-explorer-frontend-no-api/src/components/SavedMovies/SavedMovies.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { mainApi } from \"../../utils/MainApi\";\r\nimport SearchForm from \"../SearchForm/SearchForm\";\r\nimport MoviesCardList from \"../MoviesCardList/MoviesCardList\";\r\nimport { UsersMovies } from \"../../contexts/UsersMovies\";\r\n\r\nfunction Movies({ openPopupError, handleUpdateUsersMovies}) {\r\n    const [movies, setMovies] = useState([]);\r\n    const [isShortMovies, setIsShortMovies] = useState(false);\r\n    const [allMovies, setAllMovies] = useState([]);\r\n\r\n    const addedMovies = React.useContext(UsersMovies);\r\n\r\n    useEffect(() => {\r\n        // mainApi.getMovies()\r\n        //     .then((data) => {\r\n        //         setMovies(data);\r\n        //         setAllMovies(data);\r\n        //     })\r\n        //     .catch((error) => {\r\n        //         console.log(`${error}`);\r\n        //         openPopupError(true);\r\n        //     });\r\n        // setMovies(addedMovies)\r\n        // setAllMovies(addedMovies)\r\n         setMovies(addedMovies)\r\n         setAllMovies(addedMovies)\r\n        console.log(addedMovies)\r\n    }, [addedMovies]);\r\n\r\n    function findMovie(filter) {\r\n        let filteredMovies = allMovies.filter(({ nameRU }) => nameRU.toLowerCase().includes(filter.toLowerCase()));\r\n\r\n        if (isShortMovies) {\r\n            filteredMovies = filteredMovies.filter(({ duration }) => duration <= 40);\r\n        }\r\n\r\n        setMovies(filteredMovies);\r\n    }\r\n\r\n    function updateMoviesList(movieCard) {\r\n        setMovies((prevMovies) => prevMovies.filter((movie) => movie._id !== movieCard._id));\r\n    }\r\n\r\n    function handleCheckboxChange() {\r\n        setIsShortMovies(!isShortMovies);\r\n\r\n        if (isShortMovies) {\r\n            setMovies(allMovies);\r\n        } else {\r\n            const filteredMovies = allMovies.filter(({ duration }) => duration <= 40);\r\n            setMovies(filteredMovies);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <main className=\"movies\">\r\n            <SearchForm findMovie={findMovie} handleCheckboxChange={handleCheckboxChange} isShortMovies={isShortMovies} />\r\n            <MoviesCardList movies={movies} updateMoviesList={updateMoviesList} handleUpdateUsersMovies={handleUpdateUsersMovies}/>\r\n        </main>\r\n    );\r\n}\r\n\r\nexport default Movies;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,OAAO,KAAQ,qBAAqB,CAC7C,MAAO,CAAAC,UAAU,KAAM,0BAA0B,CACjD,MAAO,CAAAC,cAAc,KAAM,kCAAkC,CAC7D,OAASC,WAAW,KAAQ,4BAA4B,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEzD,QAAS,CAAAC,MAAMA,CAAAC,IAAA,CAA6C,IAA5C,CAAEC,cAAc,CAAEC,uBAAuB,CAAC,CAAAF,IAAA,CACtD,KAAM,CAACG,MAAM,CAAEC,SAAS,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACgB,aAAa,CAAEC,gBAAgB,CAAC,CAAGjB,QAAQ,CAAC,KAAK,CAAC,CACzD,KAAM,CAACkB,SAAS,CAAEC,YAAY,CAAC,CAAGnB,QAAQ,CAAC,EAAE,CAAC,CAE9C,KAAM,CAAAoB,WAAW,CAAGrB,KAAK,CAACsB,UAAU,CAAChB,WAAW,CAAC,CAEjDJ,SAAS,CAAC,IAAM,CACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACCc,SAAS,CAACK,WAAW,CAAC,CACtBD,YAAY,CAACC,WAAW,CAAC,CAC1BE,OAAO,CAACC,GAAG,CAACH,WAAW,CAAC,CAC5B,CAAC,CAAE,CAACA,WAAW,CAAC,CAAC,CAEjB,QAAS,CAAAI,SAASA,CAACC,MAAM,CAAE,CACvB,GAAI,CAAAC,cAAc,CAAGR,SAAS,CAACO,MAAM,CAACE,KAAA,MAAC,CAAEC,MAAO,CAAC,CAAAD,KAAA,OAAK,CAAAC,MAAM,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACL,MAAM,CAACI,WAAW,CAAC,CAAC,CAAC,GAAC,CAE1G,GAAIb,aAAa,CAAE,CACfU,cAAc,CAAGA,cAAc,CAACD,MAAM,CAACM,KAAA,MAAC,CAAEC,QAAS,CAAC,CAAAD,KAAA,OAAK,CAAAC,QAAQ,EAAI,EAAE,GAAC,CAC5E,CAEAjB,SAAS,CAACW,cAAc,CAAC,CAC7B,CAEA,QAAS,CAAAO,gBAAgBA,CAACC,SAAS,CAAE,CACjCnB,SAAS,CAAEoB,UAAU,EAAKA,UAAU,CAACV,MAAM,CAAEW,KAAK,EAAKA,KAAK,CAACC,GAAG,GAAKH,SAAS,CAACG,GAAG,CAAC,CAAC,CACxF,CAEA,QAAS,CAAAC,oBAAoBA,CAAA,CAAG,CAC5BrB,gBAAgB,CAAC,CAACD,aAAa,CAAC,CAEhC,GAAIA,aAAa,CAAE,CACfD,SAAS,CAACG,SAAS,CAAC,CACxB,CAAC,IAAM,CACH,KAAM,CAAAQ,cAAc,CAAGR,SAAS,CAACO,MAAM,CAACc,KAAA,MAAC,CAAEP,QAAS,CAAC,CAAAO,KAAA,OAAK,CAAAP,QAAQ,EAAI,EAAE,GAAC,CACzEjB,SAAS,CAACW,cAAc,CAAC,CAC7B,CACJ,CAEA,mBACIjB,KAAA,SAAM+B,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACpBlC,IAAA,CAACJ,UAAU,EAACqB,SAAS,CAAEA,SAAU,CAACc,oBAAoB,CAAEA,oBAAqB,CAACtB,aAAa,CAAEA,aAAc,CAAE,CAAC,cAC9GT,IAAA,CAACH,cAAc,EAACU,MAAM,CAAEA,MAAO,CAACmB,gBAAgB,CAAEA,gBAAiB,CAACpB,uBAAuB,CAAEA,uBAAwB,CAAC,CAAC,EACrH,CAAC,CAEf,CAEA,cAAe,CAAAH,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}