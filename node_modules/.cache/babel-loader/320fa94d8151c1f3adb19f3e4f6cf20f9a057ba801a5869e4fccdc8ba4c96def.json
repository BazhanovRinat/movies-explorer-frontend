{"ast":null,"code":"import _classCallCheck from\"C:/Users/79267/Desktop/praktikum/dev/movies-explorer-frontend-no-api/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/79267/Desktop/praktikum/dev/movies-explorer-frontend-no-api/node_modules/@babel/runtime/helpers/esm/createClass.js\";var MainApi=/*#__PURE__*/function(){function MainApi(data){_classCallCheck(this,MainApi);this.url=data.url;this.headers=data.headers;}_createClass(MainApi,[{key:\"_request\",value:function _request(url,options){return fetch(url,options).then(this._checkResponse);}},{key:\"_checkResponse\",value:function _checkResponse(res){if(res.ok){return res.json();}return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status));}},{key:\"setToken\",value:function setToken(token){this.headers['Authorization']=\"Bearer \".concat(token);}},{key:\"getMovies\",value:function getMovies(){return this._request(\"\".concat(this.url,\"/movies\"),{method:'GET',headers:this.headers});}},{key:\"addMovie\",value:function addMovie(item){return this._request(\"\".concat(this.url,\"/movies\"),{method:\"POST\",headers:this.headers,body:JSON.stringify(item)});}},{key:\"deleteMovie\",value:function deleteMovie(movieId){return this._request(\"\".concat(this.url,\"/movies/\").concat(movieId),{method:\"DELETE\",headers:this.headers});}},{key:\"setProfileInfo\",value:function setProfileInfo(item){return this._request(\"\".concat(this.url,\"/users/me\"),{method:\"PATCH\",headers:this.headers,body:JSON.stringify({name:item.name,email:item.email})});}},{key:\"profileDataInstall\",value:function profileDataInstall(){return this._request(\"\".concat(this.url,\"/users/me\"),{headers:this.headers});}}]);return MainApi;}();export{MainApi as default};var token=localStorage.getItem('token');export var mainApi=new MainApi({url:'https://api.bazhanov.rinat.diplom.nomoredomainsrocks.ru',// url: 'http://localhost:3001/',\nheaders:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},credentials:'include'});","map":{"version":3,"names":["MainApi","data","_classCallCheck","url","headers","_createClass","key","value","_request","options","fetch","then","_checkResponse","res","ok","json","Promise","reject","concat","status","setToken","token","getMovies","method","addMovie","item","body","JSON","stringify","deleteMovie","movieId","setProfileInfo","name","email","profileDataInstall","default","localStorage","getItem","mainApi","credentials"],"sources":["C:/Users/79267/Desktop/praktikum/dev/movies-explorer-frontend-no-api/src/utils/MainApi.js"],"sourcesContent":["export default class MainApi {\r\n    constructor(data) {\r\n        this.url = data.url;\r\n        this.headers = data.headers;\r\n    }\r\n\r\n    _request(url, options) {\r\n        return fetch(url, options).then(this._checkResponse)\r\n    }\r\n\r\n    _checkResponse(res) {\r\n        if (res.ok) {\r\n            return res.json()\r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`);\r\n    }\r\n\r\n    setToken(token) {\r\n        this.headers['Authorization'] = `Bearer ${token}`;\r\n    }\r\n\r\n    getMovies() {\r\n        return this._request(`${this.url}/movies`, {\r\n            method: 'GET',\r\n            headers: this.headers,\r\n        })\r\n    }\r\n\r\n    addMovie(item) {\r\n        return this._request(`${this.url}/movies`, {\r\n            method: \"POST\",\r\n            headers: this.headers,\r\n            body: JSON.stringify(item)\r\n        })\r\n    }\r\n\r\n    deleteMovie(movieId) {\r\n        return this._request(`${this.url}/movies/${movieId}`, {\r\n            method: \"DELETE\",\r\n            headers: this.headers,\r\n        })\r\n    }\r\n\r\n    setProfileInfo(item) {\r\n        return this._request(`${this.url}/users/me`, {\r\n            method: \"PATCH\",\r\n            headers: this.headers,\r\n            body: JSON.stringify({\r\n                name: item.name,\r\n                email: item.email\r\n            })\r\n        })\r\n    }\r\n\r\n    profileDataInstall() {\r\n        return this._request(`${this.url}/users/me`, {\r\n            headers: this.headers,\r\n        })\r\n    }\r\n\r\n}\r\n\r\nconst token = localStorage.getItem('token');\r\n\r\nexport const mainApi = new MainApi({\r\n    url: 'https://api.bazhanov.rinat.diplom.nomoredomainsrocks.ru',\r\n    // url: 'http://localhost:3001/',\r\n    headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${token}`\r\n    },\r\n    credentials: 'include',\r\n})"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}