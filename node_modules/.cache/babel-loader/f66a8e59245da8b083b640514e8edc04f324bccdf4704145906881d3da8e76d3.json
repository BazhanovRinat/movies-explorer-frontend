{"ast":null,"code":"import NavBar from'../NavBar/NavBar';import{Link}from\"react-router-dom\";import useForm from\"../../hooks/useForm\";import{useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(_ref){let{onLogin}=_ref;const{values,setValues}=useForm({});const[formValid,setFormValid]=useState(false);const[emailError,setEmailError]=useState('');const emailRegex=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$/;function isEmailValid(email){const isValid=emailRegex.test(email);if(!isValid){setEmailError('Некорректный email');}else{setEmailError('');}return isValid;}function isPasswordValid(password){return typeof password==='string'&&password.length>=2;}function validateForm(email,password){const isEmail=isEmailValid(email);const isPassword=isPasswordValid(password);return isEmail&&isPassword;}useEffect(()=>{const isFormValid=validateForm(values.email,values.password);setFormValid(isFormValid);},[values.email,values.password]);function handleChange(e){const{name,value}=e.target;setValues({...values,[name]:value});if(name==='email'){isEmailValid(value);}}function handleSubmit(evt){evt.preventDefault();isEmailValid(values.email);onLogin(values,setValues);}return/*#__PURE__*/_jsxs(\"main\",{className:\"sign-data\",children:[/*#__PURE__*/_jsx(Link,{className:\"sign-data__logo-link\",to:'/',children:/*#__PURE__*/_jsx(\"button\",{className:\"sign-data__logo-button\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"sign-data__title\",children:\"\\u0420\\u0430\\u0434\\u044B \\u0432\\u0438\\u0434\\u0435\\u0442\\u044C!\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"sign-data__form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{className:\"sign-data__label\",children:\"E-mail\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"E-mail\",minLength:2,maxLength:30,required:true,className:\"sign-data__input\",type:\"email\",onChange:handleChange,name:\"email\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sign-data__input-error\",children:emailError||document.querySelector('input[name=\"email\"]')&&document.querySelector('input[name=\"email\"]').validationMessage}),/*#__PURE__*/_jsx(\"label\",{className:\"sign-data__label\",children:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",minLength:2,maxLength:30,required:true,className:\"sign-data__input\",type:\"password\",onChange:handleChange,name:\"password\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sign-data__input-error\",children:document.querySelector('input[name=\"password\"]')&&document.querySelector('input[name=\"password\"]').validationMessage}),/*#__PURE__*/_jsx(\"button\",{className:\"sign-data__submit sign-data__login-submit\",type:\"submit\",disabled:!formValid,children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"sign-data__text-under-submit \",children:[\"\\u0415\\u0449\\u0435 \\u043D\\u0435 \\u0437\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u044B? \",/*#__PURE__*/_jsx(NavBar,{name:\"Регистрация\",path:\"sign-up\",className:\"sign-data__link-under-submit\"})]})]});}export default Login;","map":{"version":3,"names":["NavBar","Link","useForm","useEffect","useState","jsx","_jsx","jsxs","_jsxs","Login","_ref","onLogin","values","setValues","formValid","setFormValid","emailError","setEmailError","emailRegex","isEmailValid","email","isValid","test","isPasswordValid","password","length","validateForm","isEmail","isPassword","isFormValid","handleChange","e","name","value","target","handleSubmit","evt","preventDefault","className","children","to","onSubmit","placeholder","minLength","maxLength","required","type","onChange","document","querySelector","validationMessage","disabled","path"],"sources":["C:/Users/79267/desktop/praktikum/dev/movies-explorer-frontend-no-api/src/components/sign-data/Logins.js"],"sourcesContent":["import NavBar from '../NavBar/NavBar';\r\nimport { Link } from \"react-router-dom\";\r\nimport useForm from \"../../hooks/useForm\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nfunction Login({ onLogin }) {\r\n\r\n    const { values, setValues } = useForm({});\r\n    const [formValid, setFormValid] = useState(false);\r\n    const [emailError, setEmailError] = useState('');\r\n    const emailRegex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$/;\r\n\r\n    function isEmailValid(email) {\r\n        const isValid = emailRegex.test(email);\r\n        if (!isValid) {\r\n            setEmailError('Некорректный email');\r\n        } else {\r\n            setEmailError('');\r\n        }\r\n        return isValid;\r\n    }\r\n\r\n    function isPasswordValid(password) {\r\n        return typeof password === 'string' && password.length >= 2;\r\n    }\r\n\r\n    function validateForm(email, password) {\r\n        const isEmail = isEmailValid(email);\r\n        const isPassword = isPasswordValid(password);\r\n        return isEmail && isPassword;\r\n    }\r\n\r\n    useEffect(() => {\r\n        const isFormValid = validateForm(values.email, values.password);\r\n        setFormValid(isFormValid);\r\n    }, [values.email, values.password]);\r\n\r\n    function handleChange(e) {\r\n        const { name, value } = e.target;\r\n        setValues({ ...values, [name]: value });\r\n        if (name === 'email') {\r\n            isEmailValid(value);\r\n        }\r\n    }\r\n\r\n    function handleSubmit(evt) {\r\n        evt.preventDefault();\r\n        isEmailValid(values.email)\r\n        onLogin(values, setValues);\r\n    }\r\n\r\n\r\n    return (\r\n        <main className=\"sign-data\">\r\n            <Link className=\"sign-data__logo-link\" to={'/'}><button className=\"sign-data__logo-button\"></button></Link>\r\n            <h1 className=\"sign-data__title\">Рады видеть!</h1>\r\n            <form className=\"sign-data__form\" onSubmit={handleSubmit}>\r\n\r\n                <label className=\"sign-data__label\">E-mail</label>\r\n                <input placeholder=\"E-mail\" minLength={2} maxLength={30} required className=\"sign-data__input\" type=\"email\"\r\n                    onChange={handleChange} name=\"email\"></input>\r\n                <span className=\"sign-data__input-error\">\r\n                    {emailError || (document.querySelector('input[name=\"email\"]') &&\r\n                        document.querySelector('input[name=\"email\"]').validationMessage)}\r\n                </span>\r\n                <label className=\"sign-data__label\">Пароль</label>\r\n                <input placeholder=\"Пароль\" minLength={2} maxLength={30} required className=\"sign-data__input\" type=\"password\"\r\n                    onChange={handleChange} name=\"password\"\r\n                ></input>\r\n                <span className=\"sign-data__input-error\">\r\n                    {document.querySelector('input[name=\"password\"]') && document.querySelector('input[name=\"password\"]').validationMessage}\r\n                </span>\r\n\r\n                <button className=\"sign-data__submit sign-data__login-submit\" type=\"submit\" disabled={!formValid}>Войти</button>\r\n            </form>\r\n            <p className=\"sign-data__text-under-submit \">Еще не зарегистрированы? <NavBar\r\n                name={\"Регистрация\"} path={\"sign-up\"} className={\"sign-data__link-under-submit\"} />\r\n            </p>\r\n        </main>\r\n    );\r\n}\r\n\r\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}