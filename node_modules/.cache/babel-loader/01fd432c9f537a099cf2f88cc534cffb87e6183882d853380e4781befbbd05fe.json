{"ast":null,"code":"import _classCallCheck from\"C:/Users/79267/Desktop/praktikum/dev/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/79267/Desktop/praktikum/dev/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";var MainApi=/*#__PURE__*/function(){function MainApi(data){_classCallCheck(this,MainApi);this.url=data.url;this.headers=data.headers;}_createClass(MainApi,[{key:\"_request\",value:function _request(url,options){return fetch(url,options).then(this._checkResponse);}},{key:\"_checkResponse\",value:function _checkResponse(res){if(res.ok){return res.json();}return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status));}},{key:\"getMovies\",value:function getMovies(){return this._request(\"\".concat(this.url,\"/movies\"),{method:'GET',headers:this.headers});}},{key:\"addMovie\",value:function addMovie(item){return this._request(\"\".concat(this.url,\"/movies\"),{method:\"POST\",headers:this.headers,body:JSON.stringify(item)});}},{key:\"deleteMovie\",value:function deleteMovie(movieId){return this._request(\"\".concat(this.url,\"/movies/\").concat(movieId),{method:\"DELETE\",headers:this.headers});}},{key:\"setProfileInfo\",value:function setProfileInfo(item){return this._request(\"\".concat(this.url,\"/users/me\"),{method:\"PATCH\",headers:this.headers,body:JSON.stringify({name:item.name,email:item.email})});}},{key:\"profileDataInstall\",value:function profileDataInstall(){return this._request(\"\".concat(this.url,\"/users/me\"),{headers:this.headers});}}]);return MainApi;}();export{MainApi as default};var token=localStorage.getItem('token');if(token){console.log('Токен:',token);}else{console.log('Токен не найден');}export var mainApi=new MainApi({url:'https://api.bazhanov.rinat.diplom.nomoredomainsrocks.ru',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},credentials:'include'});","map":{"version":3,"names":["MainApi","data","_classCallCheck","url","headers","_createClass","key","value","_request","options","fetch","then","_checkResponse","res","ok","json","Promise","reject","concat","status","getMovies","method","addMovie","item","body","JSON","stringify","deleteMovie","movieId","setProfileInfo","name","email","profileDataInstall","default","token","localStorage","getItem","console","log","mainApi","credentials"],"sources":["C:/Users/79267/Desktop/praktikum/dev/movies-explorer-frontend/src/utils/MainApi.js"],"sourcesContent":["export default class MainApi {\r\n    constructor(data) {\r\n        this.url = data.url;\r\n        this.headers = data.headers;\r\n    }\r\n\r\n    _request(url, options) {\r\n        return fetch(url, options).then(this._checkResponse)\r\n    }\r\n\r\n    _checkResponse(res) {\r\n        if (res.ok) {\r\n            return res.json()\r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`);\r\n    }\r\n\r\n    getMovies() {\r\n        return this._request(`${this.url}/movies`, {\r\n            method: 'GET',\r\n            headers: this.headers,\r\n        })\r\n    }\r\n\r\n    addMovie(item) {\r\n        return this._request(`${this.url}/movies`, {\r\n            method: \"POST\",\r\n            headers: this.headers,\r\n            body: JSON.stringify(item)\r\n        })\r\n    }\r\n\r\n    deleteMovie(movieId) {\r\n        return this._request(`${this.url}/movies/${movieId}`, {\r\n            method: \"DELETE\",\r\n            headers: this.headers,\r\n        })\r\n    }\r\n\r\n    setProfileInfo(item) {\r\n        return this._request(`${this.url}/users/me`, {\r\n            method: \"PATCH\",\r\n            headers: this.headers,\r\n            body: JSON.stringify({\r\n                name: item.name,\r\n                email: item.email\r\n            })\r\n        })\r\n    }\r\n\r\n    profileDataInstall() {\r\n        return this._request(`${this.url}/users/me`, {\r\n            headers: this.headers,\r\n        })\r\n    }\r\n\r\n}\r\n\r\nconst token = localStorage.getItem('token');\r\n\r\nif (token) {\r\n    console.log('Токен:', token);\r\n} else {\r\n    console.log('Токен не найден');\r\n}\r\n\r\nexport const mainApi = new MainApi({\r\n    url: 'https://api.bazhanov.rinat.diplom.nomoredomainsrocks.ru',\r\n    headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${token}`\r\n    },\r\n    credentials: 'include',\r\n})"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}