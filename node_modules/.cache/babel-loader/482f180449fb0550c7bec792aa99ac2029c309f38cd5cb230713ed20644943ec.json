{"ast":null,"code":"import _defineProperty from\"C:/Users/79267/Desktop/praktikum/dev/movies-explorer-frontend-no-api/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/79267/Desktop/praktikum/dev/movies-explorer-frontend-no-api/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/79267/Desktop/praktikum/dev/movies-explorer-frontend-no-api/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import NavBar from'../NavBar/NavBar';import signDataLogo from'../../images/header__logo.svg';import{Link}from\"react-router-dom\";import useForm from\"../../hooks/useForm\";import{useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Register(_ref){var onRegister=_ref.onRegister;var _useForm=useForm({}),values=_useForm.values,setValues=_useForm.setValues;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),formValid=_useState2[0],setFormValid=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),emailError=_useState4[0],setEmailError=_useState4[1];var emailRegex=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$/;function isEmailValid(email){var isValid=emailRegex.test(email);if(!isValid){setEmailError('Некорректный email');}else{setEmailError('');}return isValid;}function isPasswordValid(password){return typeof password==='string'&&password.length>=2;}function isNameValid(name){return typeof name==='string'&&name.length>=2;}function validateForm(email,password,name){var isEmail=isEmailValid(email);var isPassword=isPasswordValid(password);var isName=isNameValid(name);return isEmail&&isPassword&&isName;}useEffect(function(){var isFormValid=validateForm(values.email,values.password,values.name);setFormValid(isFormValid);},[values.email,values.password,values.name]);function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({},name,value)));if(name==='email'){isEmailValid(value);}console.log(emailError);}function handleSubmit(evt){evt.preventDefault();isEmailValid(values.email);onRegister(values,setValues);}return/*#__PURE__*/_jsxs(\"main\",{className:\"sign-data\",children:[/*#__PURE__*/_jsx(Link,{className:\"sign-data__logo-link\",to:'/',children:/*#__PURE__*/_jsx(\"img\",{src:signDataLogo,className:\"sign-data__logo\",alt:\"\\u041B\\u043E\\u0433\\u043E\\u0442\\u0438\\u043F\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"sign-data__title\",children:\"\\u0414\\u043E\\u0431\\u0440\\u043E \\u043F\\u043E\\u0436\\u0430\\u043B\\u043E\\u0432\\u0430\\u0442\\u044C!\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"sign-data__form\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"sign-data__label\",children:\"\\u0418\\u043C\\u044F\"}),/*#__PURE__*/_jsx(\"input\",{onChange:handleChange,name:\"name\",placeholder:\"\\u0418\\u043C\\u044F\",minLength:2,maxLength:30,required:true,className:\"sign-data__input\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sign-data__input-error\",children:document.querySelector('input[name=\"name\"]')&&document.querySelector('input[name=\"name\"]').validationMessage}),/*#__PURE__*/_jsx(\"label\",{className:\"sign-data__label\",children:\"E-mail\"}),/*#__PURE__*/_jsx(\"input\",{onChange:handleChange,name:\"email\",placeholder:\"E-mail\",minLength:2,maxLength:30,required:true,className:\"sign-data__input\",type:\"email\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sign-data__input-error\",children:emailError||document.querySelector('input[name=\"email\"]')&&document.querySelector('input[name=\"email\"]').validationMessage}),/*#__PURE__*/_jsx(\"label\",{className:\"sign-data__label\",children:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"input\",{onChange:handleChange,name:\"password\",placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",minLength:2,maxLength:30,required:true,className:\"sign-data__input\",type:\"password\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sign-data__input-error\",children:document.querySelector('input[name=\"password\"]')&&document.querySelector('input[name=\"password\"]').validationMessage}),/*#__PURE__*/_jsx(\"button\",{className:\"sign-data__submit\",type:\"submit\",disabled:!formValid,children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"sign-data__text-under-submit\",children:[\"\\u0423\\u0436\\u0435 \\u0437\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u044B? \",/*#__PURE__*/_jsx(NavBar,{name:\"Войти\",path:\"sign-in\",className:\"sign-data__link-under-submit\"})]})]});}export default Register;","map":{"version":3,"names":["NavBar","signDataLogo","Link","useForm","useEffect","useState","jsx","_jsx","jsxs","_jsxs","Register","_ref","onRegister","_useForm","values","setValues","_useState","_useState2","_slicedToArray","formValid","setFormValid","_useState3","_useState4","emailError","setEmailError","emailRegex","isEmailValid","email","isValid","test","isPasswordValid","password","length","isNameValid","name","validateForm","isEmail","isPassword","isName","isFormValid","handleChange","e","_e$target","target","value","_objectSpread","_defineProperty","console","log","handleSubmit","evt","preventDefault","className","children","to","src","alt","onSubmit","onChange","placeholder","minLength","maxLength","required","document","querySelector","validationMessage","type","disabled","path"],"sources":["C:/Users/79267/desktop/praktikum/dev/movies-explorer-frontend-no-api/src/components/sign-data/Register.js"],"sourcesContent":["import NavBar from '../NavBar/NavBar';\r\nimport signDataLogo from '../../images/header__logo.svg';\r\nimport { Link } from \"react-router-dom\";\r\nimport useForm from \"../../hooks/useForm\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nfunction Register({ onRegister }) {\r\n\r\n    const { values, setValues } = useForm({});\r\n    const [formValid, setFormValid] = useState(false);\r\n    const [emailError, setEmailError] = useState('');\r\n    const emailRegex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$/;\r\n\r\n\r\n    function isEmailValid(email) {\r\n        const isValid = emailRegex.test(email);\r\n        if (!isValid) {\r\n            setEmailError('Некорректный email');\r\n        } else {\r\n            setEmailError('');\r\n        }\r\n        return isValid;\r\n    }\r\n\r\n    function isPasswordValid(password) {\r\n        return typeof password === 'string' && password.length >= 2;\r\n    }\r\n\r\n    function isNameValid(name) {\r\n        return typeof name === 'string' && name.length >= 2;\r\n    }\r\n\r\n    function validateForm(email, password, name) {\r\n        const isEmail = isEmailValid(email);\r\n        const isPassword = isPasswordValid(password);\r\n        const isName = isNameValid(name)\r\n        return isEmail && isPassword && isName;\r\n    }\r\n\r\n    useEffect(() => {\r\n        const isFormValid = validateForm(values.email, values.password, values.name);\r\n        setFormValid(isFormValid);\r\n    }, [values.email, values.password, values.name]);\r\n\r\n    function handleChange(e) {\r\n        const { name, value } = e.target;\r\n        setValues({ ...values, [name]: value });\r\n        if (name === 'email') {\r\n            isEmailValid(value);\r\n        }\r\n        console.log(emailError)\r\n    }\r\n\r\n    function handleSubmit(evt) {\r\n        evt.preventDefault();\r\n        isEmailValid(values.email);\r\n        onRegister(values, setValues);\r\n    }\r\n\r\n    return (\r\n        <main className=\"sign-data\">\r\n            <Link className=\"sign-data__logo-link\" to={'/'}><img src={signDataLogo} className=\"sign-data__logo\" alt=\"Логотип\"></img></Link>\r\n            <h1 className=\"sign-data__title\">Добро пожаловать!</h1>\r\n            <form onSubmit={handleSubmit} className=\"sign-data__form\">\r\n\r\n                <label className=\"sign-data__label\">Имя</label>\r\n                <input\r\n                    onChange={handleChange} name=\"name\" placeholder=\"Имя\" minLength={2}\r\n                    maxLength={30} required className=\"sign-data__input\"\r\n                ></input>\r\n                <span className=\"sign-data__input-error\">{document.querySelector('input[name=\"name\"]') &&\r\n                    document.querySelector('input[name=\"name\"]').validationMessage}</span>\r\n\r\n                <label className=\"sign-data__label\">E-mail</label>\r\n                <input onChange={handleChange} name=\"email\" placeholder=\"E-mail\" minLength={2} maxLength={30} required\r\n                    className=\"sign-data__input\" type=\"email\"\r\n                ></input>\r\n                <span className=\"sign-data__input-error\">\r\n                    {emailError || (document.querySelector('input[name=\"email\"]') &&\r\n                        document.querySelector('input[name=\"email\"]').validationMessage)}\r\n                </span>\r\n\r\n                <label className=\"sign-data__label\">Пароль</label>\r\n                <input onChange={handleChange} name=\"password\" placeholder=\"Пароль\" minLength={2} maxLength={30} required\r\n                    className=\"sign-data__input\" type=\"password\"\r\n                ></input>\r\n                <span className=\"sign-data__input-error\">{document.querySelector('input[name=\"password\"]') &&\r\n                    document.querySelector('input[name=\"password\"]').validationMessage}</span>\r\n\r\n                <button className=\"sign-data__submit\" type=\"submit\" disabled={!formValid}>Зарегистрироваться</button>\r\n            </form>\r\n            <p className=\"sign-data__text-under-submit\">Уже зарегистрированы? <NavBar\r\n                name={\"Войти\"} path={\"sign-in\"} className={\"sign-data__link-under-submit\"} />\r\n            </p>\r\n        </main>\r\n    );\r\n}\r\n\r\nexport default Register;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}