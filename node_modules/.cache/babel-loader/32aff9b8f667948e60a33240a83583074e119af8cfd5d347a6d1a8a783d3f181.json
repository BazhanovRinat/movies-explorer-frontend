{"ast":null,"code":"import _defineProperty from\"C:/Users/79267/Desktop/praktikum/dev/movies-explorer-frontend-no-api/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/79267/Desktop/praktikum/dev/movies-explorer-frontend-no-api/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/79267/Desktop/praktikum/dev/movies-explorer-frontend-no-api/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import NavBar from'../NavBar/NavBar';import{Link}from\"react-router-dom\";import useForm from\"../../hooks/useForm\";import{useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(_ref){var onLogin=_ref.onLogin;var _useForm=useForm({}),values=_useForm.values,setValues=_useForm.setValues;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),formValid=_useState2[0],setFormValid=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),emailError=_useState4[0],setEmailError=_useState4[1];var emailRegex=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$/;function isEmailValid(email){var isValid=emailRegex.test(email);if(!isValid){setEmailError('Некорректный email');}else{setEmailError('');}return isValid;}function isPasswordValid(password){return typeof password==='string'&&password.length>=2;}function validateForm(email,password){var isEmail=isEmailValid(email);var isPassword=isPasswordValid(password);return isEmail&&isPassword;}useEffect(function(){var isFormValid=validateForm(values.email,values.password);setFormValid(isFormValid);},[values.email,values.password]);function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({},name,value)));if(name==='email'){isEmailValid(value);}}function handleSubmit(evt){evt.preventDefault();isEmailValid(values.email);onLogin(values,setValues);}return/*#__PURE__*/_jsxs(\"main\",{className:\"sign-data\",children:[/*#__PURE__*/_jsx(Link,{className:\"sign-data__logo-link\",to:'/',children:/*#__PURE__*/_jsx(\"button\",{className:\"sign-data__logo-button\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"sign-data__title\",children:\"\\u0420\\u0430\\u0434\\u044B \\u0432\\u0438\\u0434\\u0435\\u0442\\u044C!\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"sign-data__form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{className:\"sign-data__label\",children:\"E-mail\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"E-mail\",minLength:2,maxLength:30,required:true,className:\"sign-data__input\",type:\"email\",onChange:handleChange,name:\"email\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sign-data__input-error\",children:emailError||document.querySelector('input[name=\"email\"]')&&document.querySelector('input[name=\"email\"]').validationMessage}),/*#__PURE__*/_jsx(\"label\",{className:\"sign-data__label\",children:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",minLength:2,maxLength:30,required:true,className:\"sign-data__input\",type:\"password\",onChange:handleChange,name:\"password\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sign-data__input-error\",children:document.querySelector('input[name=\"password\"]')&&document.querySelector('input[name=\"password\"]').validationMessage}),/*#__PURE__*/_jsx(\"button\",{className:\"sign-data__submit sign-data__login-submit\",type:\"submit\",disabled:!formValid,children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"sign-data__text-under-submit \",children:[\"\\u0415\\u0449\\u0435 \\u043D\\u0435 \\u0437\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u044B? \",/*#__PURE__*/_jsx(NavBar,{name:\"Регистрация\",path:\"sign-up\",className:\"sign-data__link-under-submit\"})]})]});}export default Login;","map":{"version":3,"names":["NavBar","Link","useForm","useEffect","useState","jsx","_jsx","jsxs","_jsxs","Login","_ref","onLogin","_useForm","values","setValues","_useState","_useState2","_slicedToArray","formValid","setFormValid","_useState3","_useState4","emailError","setEmailError","emailRegex","isEmailValid","email","isValid","test","isPasswordValid","password","length","validateForm","isEmail","isPassword","isFormValid","handleChange","e","_e$target","target","name","value","_objectSpread","_defineProperty","handleSubmit","evt","preventDefault","className","children","to","onSubmit","placeholder","minLength","maxLength","required","type","onChange","document","querySelector","validationMessage","disabled","path"],"sources":["C:/Users/79267/Desktop/praktikum/dev/movies-explorer-frontend-no-api/src/components/sign-data/Logins.js"],"sourcesContent":["import NavBar from '../NavBar/NavBar';\r\nimport { Link } from \"react-router-dom\";\r\nimport useForm from \"../../hooks/useForm\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nfunction Login({ onLogin }) {\r\n\r\n    const { values, setValues } = useForm({});\r\n    const [formValid, setFormValid] = useState(false);\r\n    const [emailError, setEmailError] = useState('');\r\n    const emailRegex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$/;\r\n\r\n    function isEmailValid(email) {\r\n        const isValid = emailRegex.test(email);\r\n        if (!isValid) {\r\n            setEmailError('Некорректный email');\r\n        } else {\r\n            setEmailError('');\r\n        }\r\n        return isValid;\r\n    }\r\n\r\n    function isPasswordValid(password) {\r\n        return typeof password === 'string' && password.length >= 2;\r\n    }\r\n\r\n    function validateForm(email, password) {\r\n        const isEmail = isEmailValid(email);\r\n        const isPassword = isPasswordValid(password);\r\n        return isEmail && isPassword;\r\n    }\r\n\r\n    useEffect(() => {\r\n        const isFormValid = validateForm(values.email, values.password);\r\n        setFormValid(isFormValid);\r\n    }, [values.email, values.password]);\r\n\r\n    function handleChange(e) {\r\n        const { name, value } = e.target;\r\n        setValues({ ...values, [name]: value });\r\n        if (name === 'email') {\r\n            isEmailValid(value);\r\n        }\r\n    }\r\n\r\n    function handleSubmit(evt) {\r\n        evt.preventDefault();\r\n        isEmailValid(values.email)\r\n        onLogin(values, setValues);\r\n    }\r\n\r\n\r\n    return (\r\n        <main className=\"sign-data\">\r\n            <Link className=\"sign-data__logo-link\" to={'/'}><button className=\"sign-data__logo-button\"></button></Link>\r\n            <h1 className=\"sign-data__title\">Рады видеть!</h1>\r\n            <form className=\"sign-data__form\" onSubmit={handleSubmit}>\r\n\r\n                <label className=\"sign-data__label\">E-mail</label>\r\n                <input placeholder=\"E-mail\" minLength={2} maxLength={30} required className=\"sign-data__input\" type=\"email\"\r\n                    onChange={handleChange} name=\"email\"></input>\r\n                <span className=\"sign-data__input-error\">\r\n                    {emailError || (document.querySelector('input[name=\"email\"]') &&\r\n                        document.querySelector('input[name=\"email\"]').validationMessage)}\r\n                </span>\r\n                <label className=\"sign-data__label\">Пароль</label>\r\n                <input placeholder=\"Пароль\" minLength={2} maxLength={30} required className=\"sign-data__input\" type=\"password\"\r\n                    onChange={handleChange} name=\"password\"\r\n                ></input>\r\n                <span className=\"sign-data__input-error\">\r\n                    {document.querySelector('input[name=\"password\"]') && document.querySelector('input[name=\"password\"]').validationMessage}\r\n                </span>\r\n\r\n                <button className=\"sign-data__submit sign-data__login-submit\" type=\"submit\" disabled={!formValid}>Войти</button>\r\n            </form>\r\n            <p className=\"sign-data__text-under-submit \">Еще не зарегистрированы? <NavBar\r\n                name={\"Регистрация\"} path={\"sign-up\"} className={\"sign-data__link-under-submit\"} />\r\n            </p>\r\n        </main>\r\n    );\r\n}\r\n\r\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}