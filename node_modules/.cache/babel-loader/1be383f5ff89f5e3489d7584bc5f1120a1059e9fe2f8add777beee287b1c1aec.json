{"ast":null,"code":"import _slicedToArray from\"C:/Users/79267/Desktop/praktikum/dev/movies-explorer-frontend-no-api/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{mainApi}from\"../../utils/MainApi\";import SearchForm from\"../SearchForm/SearchForm\";import MoviesCardList from\"../MoviesCardList/MoviesCardList\";import{UsersMovies}from\"../../contexts/UsersMovies\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Movies(_ref){var openPopupError=_ref.openPopupError,handleUpdateUsersMovies=_ref.handleUpdateUsersMovies;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),movies=_useState2[0],setMovies=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isShortMovies=_useState4[0],setIsShortMovies=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),allMovies=_useState6[0],setAllMovies=_useState6[1];var addedMovies=React.useContext(UsersMovies);useEffect(function(){// mainApi.getMovies()\n//     .then((data) => {\n//         setMovies(data);\n//         setAllMovies(data);\n//     })\n//     .catch((error) => {\n//         console.log(`${error}`);\n//         openPopupError(true);\n//     });\n// setMovies(addedMovies)\n// setAllMovies(addedMovies)\nsetMovies(addedMovies);setAllMovies(addedMovies);console.log(addedMovies);},[addedMovies]);function findMovie(filter){var filteredMovies=allMovies.filter(function(_ref2){var nameRU=_ref2.nameRU;return nameRU.toLowerCase().includes(filter.toLowerCase());});if(isShortMovies){filteredMovies=filteredMovies.filter(function(_ref3){var duration=_ref3.duration;return duration<=40;});}setMovies(filteredMovies);}function updateMoviesList(movieCard){setMovies(function(prevMovies){return prevMovies.filter(function(movie){return movie._id!==movieCard._id;});});}function handleCheckboxChange(){setIsShortMovies(!isShortMovies);if(isShortMovies){setMovies(allMovies);}else{var filteredMovies=allMovies.filter(function(_ref4){var duration=_ref4.duration;return duration<=40;});setMovies(filteredMovies);}}return/*#__PURE__*/_jsxs(\"main\",{className:\"movies\",children:[/*#__PURE__*/_jsx(SearchForm,{findMovie:findMovie,handleCheckboxChange:handleCheckboxChange,isShortMovies:isShortMovies}),/*#__PURE__*/_jsx(MoviesCardList,{movies:movies,updateMoviesList:updateMoviesList,handleUpdateUsersMovies:handleUpdateUsersMovies})]});}export default Movies;","map":{"version":3,"names":["React","useState","useEffect","mainApi","SearchForm","MoviesCardList","UsersMovies","jsx","_jsx","jsxs","_jsxs","Movies","_ref","openPopupError","handleUpdateUsersMovies","_useState","_useState2","_slicedToArray","movies","setMovies","_useState3","_useState4","isShortMovies","setIsShortMovies","_useState5","_useState6","allMovies","setAllMovies","addedMovies","useContext","console","log","findMovie","filter","filteredMovies","_ref2","nameRU","toLowerCase","includes","_ref3","duration","updateMoviesList","movieCard","prevMovies","movie","_id","handleCheckboxChange","_ref4","className","children"],"sources":["C:/Users/79267/desktop/praktikum/dev/movies-explorer-frontend-no-api/src/components/SavedMovies/SavedMovies.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { mainApi } from \"../../utils/MainApi\";\r\nimport SearchForm from \"../SearchForm/SearchForm\";\r\nimport MoviesCardList from \"../MoviesCardList/MoviesCardList\";\r\nimport { UsersMovies } from \"../../contexts/UsersMovies\";\r\n\r\nfunction Movies({ openPopupError, handleUpdateUsersMovies}) {\r\n    const [movies, setMovies] = useState([]);\r\n    const [isShortMovies, setIsShortMovies] = useState(false);\r\n    const [allMovies, setAllMovies] = useState([]);\r\n\r\n    const addedMovies = React.useContext(UsersMovies);\r\n\r\n    useEffect(() => {\r\n        // mainApi.getMovies()\r\n        //     .then((data) => {\r\n        //         setMovies(data);\r\n        //         setAllMovies(data);\r\n        //     })\r\n        //     .catch((error) => {\r\n        //         console.log(`${error}`);\r\n        //         openPopupError(true);\r\n        //     });\r\n        // setMovies(addedMovies)\r\n        // setAllMovies(addedMovies)\r\n         setMovies(addedMovies)\r\n         setAllMovies(addedMovies)\r\n        console.log(addedMovies)\r\n    }, [addedMovies]);\r\n\r\n    function findMovie(filter) {\r\n        let filteredMovies = allMovies.filter(({ nameRU }) => nameRU.toLowerCase().includes(filter.toLowerCase()));\r\n\r\n        if (isShortMovies) {\r\n            filteredMovies = filteredMovies.filter(({ duration }) => duration <= 40);\r\n        }\r\n\r\n        setMovies(filteredMovies);\r\n    }\r\n\r\n    function updateMoviesList(movieCard) {\r\n        setMovies((prevMovies) => prevMovies.filter((movie) => movie._id !== movieCard._id));\r\n    }\r\n\r\n    function handleCheckboxChange() {\r\n        setIsShortMovies(!isShortMovies);\r\n\r\n        if (isShortMovies) {\r\n            setMovies(allMovies);\r\n        } else {\r\n            const filteredMovies = allMovies.filter(({ duration }) => duration <= 40);\r\n            setMovies(filteredMovies);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <main className=\"movies\">\r\n            <SearchForm findMovie={findMovie} handleCheckboxChange={handleCheckboxChange} isShortMovies={isShortMovies} />\r\n            <MoviesCardList movies={movies} updateMoviesList={updateMoviesList} handleUpdateUsersMovies={handleUpdateUsersMovies}/>\r\n        </main>\r\n    );\r\n}\r\n\r\nexport default Movies;\r\n"],"mappings":"0JAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,OAAO,KAAQ,qBAAqB,CAC7C,MAAO,CAAAC,UAAU,KAAM,0BAA0B,CACjD,MAAO,CAAAC,cAAc,KAAM,kCAAkC,CAC7D,OAASC,WAAW,KAAQ,4BAA4B,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEzD,QAAS,CAAAC,MAAMA,CAAAC,IAAA,CAA6C,IAA1C,CAAAC,cAAc,CAAAD,IAAA,CAAdC,cAAc,CAAEC,uBAAuB,CAAAF,IAAA,CAAvBE,uBAAuB,CACrD,IAAAC,SAAA,CAA4Bd,QAAQ,CAAC,EAAE,CAAC,CAAAe,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAjCG,MAAM,CAAAF,UAAA,IAAEG,SAAS,CAAAH,UAAA,IACxB,IAAAI,UAAA,CAA0CnB,QAAQ,CAAC,KAAK,CAAC,CAAAoB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAlDE,aAAa,CAAAD,UAAA,IAAEE,gBAAgB,CAAAF,UAAA,IACtC,IAAAG,UAAA,CAAkCvB,QAAQ,CAAC,EAAE,CAAC,CAAAwB,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAAvCE,SAAS,CAAAD,UAAA,IAAEE,YAAY,CAAAF,UAAA,IAE9B,GAAM,CAAAG,WAAW,CAAG5B,KAAK,CAAC6B,UAAU,CAACvB,WAAW,CAAC,CAEjDJ,SAAS,CAAC,UAAM,CACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACCiB,SAAS,CAACS,WAAW,CAAC,CACtBD,YAAY,CAACC,WAAW,CAAC,CAC1BE,OAAO,CAACC,GAAG,CAACH,WAAW,CAAC,CAC5B,CAAC,CAAE,CAACA,WAAW,CAAC,CAAC,CAEjB,QAAS,CAAAI,SAASA,CAACC,MAAM,CAAE,CACvB,GAAI,CAAAC,cAAc,CAAGR,SAAS,CAACO,MAAM,CAAC,SAAAE,KAAA,KAAG,CAAAC,MAAM,CAAAD,KAAA,CAANC,MAAM,OAAO,CAAAA,MAAM,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACL,MAAM,CAACI,WAAW,CAAC,CAAC,CAAC,GAAC,CAE1G,GAAIf,aAAa,CAAE,CACfY,cAAc,CAAGA,cAAc,CAACD,MAAM,CAAC,SAAAM,KAAA,KAAG,CAAAC,QAAQ,CAAAD,KAAA,CAARC,QAAQ,OAAO,CAAAA,QAAQ,EAAI,EAAE,GAAC,CAC5E,CAEArB,SAAS,CAACe,cAAc,CAAC,CAC7B,CAEA,QAAS,CAAAO,gBAAgBA,CAACC,SAAS,CAAE,CACjCvB,SAAS,CAAC,SAACwB,UAAU,QAAK,CAAAA,UAAU,CAACV,MAAM,CAAC,SAACW,KAAK,QAAK,CAAAA,KAAK,CAACC,GAAG,GAAKH,SAAS,CAACG,GAAG,GAAC,GAAC,CACxF,CAEA,QAAS,CAAAC,oBAAoBA,CAAA,CAAG,CAC5BvB,gBAAgB,CAAC,CAACD,aAAa,CAAC,CAEhC,GAAIA,aAAa,CAAE,CACfH,SAAS,CAACO,SAAS,CAAC,CACxB,CAAC,IAAM,CACH,GAAM,CAAAQ,cAAc,CAAGR,SAAS,CAACO,MAAM,CAAC,SAAAc,KAAA,KAAG,CAAAP,QAAQ,CAAAO,KAAA,CAARP,QAAQ,OAAO,CAAAA,QAAQ,EAAI,EAAE,GAAC,CACzErB,SAAS,CAACe,cAAc,CAAC,CAC7B,CACJ,CAEA,mBACIxB,KAAA,SAAMsC,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACpBzC,IAAA,CAACJ,UAAU,EAAC4B,SAAS,CAAEA,SAAU,CAACc,oBAAoB,CAAEA,oBAAqB,CAACxB,aAAa,CAAEA,aAAc,CAAE,CAAC,cAC9Gd,IAAA,CAACH,cAAc,EAACa,MAAM,CAAEA,MAAO,CAACuB,gBAAgB,CAAEA,gBAAiB,CAAC3B,uBAAuB,CAAEA,uBAAwB,CAAC,CAAC,EACrH,CAAC,CAEf,CAEA,cAAe,CAAAH,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}